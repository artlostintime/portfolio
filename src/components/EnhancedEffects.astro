---
// Enhanced interactive effects component
---

<!-- Back to Top Button -->
<button class="back-to-top" id="backToTop" aria-label="Back to top" title="Back to top">
  â†‘
</button>

<!-- Cursor Trail -->
<div class="cursor-trail" id="cursorTrail"></div>

<!-- Skip to content for accessibility -->
<a href="#main-content" class="skip-to-content">Skip to content</a>

<script>
  // Back to top button
  const backToTop = document.getElementById('backToTop');
  
  window.addEventListener('scroll', () => {
    if (window.pageYOffset > 300) {
      backToTop?.classList.add('visible');
    } else {
      backToTop?.classList.remove('visible');
    }
  });
  
  backToTop?.addEventListener('click', () => {
    window.scrollTo({ top: 0, behavior: 'smooth' });
  });
  
  // Cursor trail effect (only on desktop)
  if (window.innerWidth > 768) {
    const cursorTrail = document.getElementById('cursorTrail');
    let mouseX = 0;
    let mouseY = 0;
    let trailX = 0;
    let trailY = 0;
    
    document.addEventListener('mousemove', (e) => {
      mouseX = e.clientX;
      mouseY = e.clientY;
    });
    
    function animateTrail() {
      const dx = mouseX - trailX;
      const dy = mouseY - trailY;
      
      trailX += dx * 0.1;
      trailY += dy * 0.1;
      
      if (cursorTrail) {
        cursorTrail.style.left = trailX + 'px';
        cursorTrail.style.top = trailY + 'px';
      }
      
      requestAnimationFrame(animateTrail);
    }
    
    animateTrail();
  }
  
  // Fade in on scroll observer
  const observerOptions = {
    threshold: 0.1,
    rootMargin: '0px 0px -50px 0px'
  };
  
  const observer = new IntersectionObserver((entries) => {
    entries.forEach(entry => {
      if (entry.isIntersecting) {
        entry.target.classList.add('visible');
      }
    });
  }, observerOptions);
  
  // Observe all fade-in elements
  document.addEventListener('DOMContentLoaded', () => {
    const fadeElements = document.querySelectorAll('.fade-in');
    fadeElements.forEach(el => observer.observe(el));
  });
  
  // Keyboard navigation detection
  let isKeyboardNav = false;
  
  document.addEventListener('keydown', (e) => {
    if (e.key === 'Tab') {
      isKeyboardNav = true;
      document.body.classList.add('keyboard-nav');
    }
  });
  
  document.addEventListener('mousedown', () => {
    isKeyboardNav = false;
    document.body.classList.remove('keyboard-nav');
  });
  
  // Easter egg: Konami code
  const konamiCode = ['ArrowUp', 'ArrowUp', 'ArrowDown', 'ArrowDown', 'ArrowLeft', 'ArrowRight', 'ArrowLeft', 'ArrowRight', 'b', 'a'];
  let konamiIndex = 0;
  
  document.addEventListener('keydown', (e) => {
    if (e.key === konamiCode[konamiIndex]) {
      konamiIndex++;
      if (konamiIndex === konamiCode.length) {
        activateEasterEgg();
        konamiIndex = 0;
      }
    } else {
      konamiIndex = 0;
    }
  });
  
  function activateEasterEgg() {
    const stars = document.querySelectorAll('.star');
    stars.forEach(star => {
      if (star instanceof HTMLElement) {
        star.style.background = `hsl(${Math.random() * 360}, 100%, 50%)`;
      }
    });
    setTimeout(() => {
      stars.forEach(star => {
        if (star instanceof HTMLElement) {
          star.style.background = 'white';
        }
      });
    }, 3000);
  }
</script>
